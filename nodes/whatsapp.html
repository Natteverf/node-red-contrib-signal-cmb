<script type='text/javascript'>
	RED.nodes.registerType('node-red-contrib-whatsapp-cmb-account', {
        category: 'config',
        icon: "whatsapp.svg",
        color: "#25D366",
        defaults: {
            name: {value: ""}
        },
        credentials: {
            key: {type:"password"},
            phonenumber: {type:"text"}
        },
        label: function() {
            return this.name||"Whatsapp Account";
        },
        oneditsave: function(){
            console.log('save', this);
        }
    });
</script>

<script type='text/x-red' data-template-name='node-red-contrib-whatsapp-cmb-account'>
	<div class='form-row'>
		<label for='node-config-input-name'><i class='fa fa-tag'></i> Name</label>
		<input type='text' id='node-config-input-name'/>
    </div>
    <div class='form-row'>
		<label for='node-config-input-phonenumber'><i class='fa fa-phone'></i> Name</label>
		<input type='text' id='node-config-input-phonenumber' placeholder="Phone Number"/>
	</div>
	<div class='form-row'>
		<label for='node-config-input-key'><i class='fa fa-key'></i> API-KEY</label>
		<input type='password' id='node-config-input-key' placeholder="API-KEY for WhatsApp CMB"/>
    </div>
    <div class="form-tips">
        <p><b>Note</b>: How to create an API key? Show <a href="https://github.com/PfisterDaniel/node-red-contrib-whatsapp-cmb#readme">here</a> for more information.</p>
    </div>
</script>



<script type='text/javascript'>
	RED.nodes.registerType('node-red-contrib-whatsapp-cmb-send-message', {
		category: 'WhatsApp',
        icon: "whatsapp.svg",
        color: "#25D366",
        paletteLabel: 'Send Message',
		defaults: {
			name: {
				value: '',
				required: false
            },
            account: {value: "", type:"node-red-contrib-whatsapp-cmb-account", required: true},
            text:{
				value: '',
				required: false
            },
            rejectssl: { value: false }
		},
		label: function() {
			return this.name ? this.name : 'Send Message'
		},
		inputs: 1,
		outputs: 1,
		oneditprepare: function(){
            console.log('prepare', this);
            if (this.rejectssl === undefined) {
                $("#node-config-input-rejectssl").prop('checked', false);
            }
        },
        oneditsave: function() {
            console.log('save', this);
        },
        oneditresize: function() {
            console.log('resize', this);
        }
	})
</script>

<script type='text/x-red' data-template-name='node-red-contrib-whatsapp-cmb-send-message'>
	<div class='form-row'>
		<label for='node-input-name'><i class='fa fa-tag'></i> Name</label>
		<input type='text' id='node-input-name'/>
    </div>
    <div class="form-row">
		<label for="node-input-account"><i class="fa fa-user"></i> Account</label>
		<input type="text" id="node-input-account">
    </div>
    <div class="form-row">
		<label for="node-input-text"><i class="fa fa-commenting-o"></i> Message</label>
		<textarea id="node-input-text" rows="5" style="width:100%"></textarea>
    </div>
    <div class="form-row">
        <label for="node-input-rejectssl" style="width:160px"><i class="fa fa-shield"></i> Reject-Unauthorized:</label>
        <input type="checkbox" checked id="node-input-rejectssl" style="display:inline-block; width:auto; vertical-align:top;">
    </div>
    <div class="form-tips">
        <p><b>Note</b>: If you received the error "unable to get local issuer certificate", you can skip the error with "Reject-Unauthorized", but this is not a secure option.</p>
    </div>
</script>